<!DOCTYPE html>
<html lang="en"><head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Leetcode 1067 - Digit Count in Range | Dmitry Babichev’s webpage</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Leetcode 1067 - Digit Count in Range" />
<meta name="author" content="Dmitry Babichev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Problem statement" />
<meta property="og:description" content="Problem statement" />
<meta property="og:site_name" content="Dmitry Babichev’s webpage" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-08-14T19:09:20+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Leetcode 1067 - Digit Count in Range" />
<script type="application/ld+json">
{"url":"/leetcode/1067.html","@type":"BlogPosting","headline":"Leetcode 1067 - Digit Count in Range","dateModified":"2021-08-14T19:09:20+02:00","datePublished":"2021-08-14T19:09:20+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"/leetcode/1067.html"},"author":{"@type":"Person","name":"Dmitry Babichev"},"description":"Problem statement","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Dmitry Babichev's webpage" />
    






  
  
</head>

    
    <!-- for mathjax support -->
    
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Dmitry Babichev&#39;s webpage</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/leetcode%20problems/">Leetcode problems</a><a class="page-link" href="/coding%20ideas/">Patterns</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <span>[
  
    
    <a href="/tag/math"><code class="highligher-rouge"><nobr>math</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/digit build"><code class="highligher-rouge"><nobr>digit build</nobr></code>&nbsp;</a>
  
]</span>

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Leetcode 1067 - Digit Count in Range</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-08-14T19:09:20+02:00" itemprop="datePublished">
        Aug 14, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h4 id="problem-statement">Problem statement</h4>

<p><a href="https://leetcode.com/problems/digit-count-in-range/"> <font color="blue">https://leetcode.com/problems/digit-count-in-range/</font></a></p>

<h4 id="solution">Solution</h4>
<p>This problem can be solved using the technique I called <code class="language-plaintext highlighter-rouge">digit build</code>: the idea is to construct digit by digit and check number of cases for each group of numbers. First of all notice, that if we know how to solve this problem in range <code class="language-plaintext highlighter-rouge">[1, limit]</code>, then we can solve original problem. Let us consider example: <code class="language-plaintext highlighter-rouge">limit = 142857</code>. Then all numbers smaller than <code class="language-plaintext highlighter-rouge">limit</code> can be separated into the following groups:</p>

<p><code class="language-plaintext highlighter-rouge">?*****</code>, where <code class="language-plaintext highlighter-rouge">?</code> is here is smaller than <code class="language-plaintext highlighter-rouge">1</code>. Also we need to avoid numbers, which start with <code class="language-plaintext highlighter-rouge">0</code>, so in this case this group is empty.</p>

<p><code class="language-plaintext highlighter-rouge">1?****</code>, where <code class="language-plaintext highlighter-rouge">?</code> is here can be <code class="language-plaintext highlighter-rouge">[0, 1, 2, 3]</code> and <code class="language-plaintext highlighter-rouge">*</code> denote any digit.</p>

<p><code class="language-plaintext highlighter-rouge">14?***</code>, where <code class="language-plaintext highlighter-rouge">?</code> here is range <code class="language-plaintext highlighter-rouge">[0, 1]</code> and again <code class="language-plaintext highlighter-rouge">*</code> is any digit.</p>

<p><code class="language-plaintext highlighter-rouge">142?**</code>, where <code class="language-plaintext highlighter-rouge">?</code> in range <code class="language-plaintext highlighter-rouge">[0, 1, 2, 3, 4, 5, 6, 7]</code></p>

<p><code class="language-plaintext highlighter-rouge">1428?*</code>, where <code class="language-plaintext highlighter-rouge">?</code> in range <code class="language-plaintext highlighter-rouge">[0, 1, 2, 3, 4]</code></p>

<p><code class="language-plaintext highlighter-rouge">14285?</code>, where <code class="language-plaintext highlighter-rouge">?</code> in range <code class="language-plaintext highlighter-rouge">[0, 1, 2, 3, 4, 5, 6]</code></p>

<p>Let us know discuss the steps of our algorithm:</p>

<ol>
  <li>Transform <code class="language-plaintext highlighter-rouge">limit</code> to string, it will be simpler to work with. Also we add <code class="language-plaintext highlighter-rouge">1</code> to it, because this will work for open interval, whereas we want close interval.</li>
  <li><code class="language-plaintext highlighter-rouge">ans</code> will be total number of digits found, <code class="language-plaintext highlighter-rouge">k</code> is length of string and <code class="language-plaintext highlighter-rouge">q</code> will be to count number of digits <code class="language-plaintext highlighter-rouge">s</code> in prefixes of string.</li>
  <li>Now we iterate digit by digit and do the following steps:
    <ol>
      <li>Transform this digit back to integer.</li>
      <li>Update <code class="language-plaintext highlighter-rouge">q</code>: number of digits <code class="language-plaintext highlighter-rouge">d</code> in prefix: we do it in advance, so when we evaluate part3 we will subtract it, see more details later.</li>
      <li>If <code class="language-plaintext highlighter-rouge">t == 0</code>, it means that we have current digit equal to <code class="language-plaintext highlighter-rouge">0</code> or <code class="language-plaintext highlighter-rouge">t == 1</code> and <code class="language-plaintext highlighter-rouge">i == 0</code>, we continue, because we have empty group here, like in our example.</li>
      <li><code class="language-plaintext highlighter-rouge">part1</code> is how many times we have digit <code class="language-plaintext highlighter-rouge">d</code> instead of <code class="language-plaintext highlighter-rouge">*</code> in our groups. If <code class="language-plaintext highlighter-rouge">i == 0</code>, then instead of <code class="language-plaintext highlighter-rouge">?</code> we chan have <code class="language-plaintext highlighter-rouge">t-1</code> numbers, in opposite case we can have <code class="language-plaintext highlighter-rouge">t</code> numbers. Also, for each of <code class="language-plaintext highlighter-rouge">k-i-1</code> places of <code class="language-plaintext highlighter-rouge">*</code> we can put digit <code class="language-plaintext highlighter-rouge">d</code> and fill all other places with any of the <code class="language-plaintext highlighter-rouge">10</code> options. In total, we have <code class="language-plaintext highlighter-rouge">10**(k-i-2)*(k-i-1)*(t-(i==0))</code> options.</li>
      <li><code class="language-plaintext highlighter-rouge">part2</code> is how many times we have digit <code class="language-plaintext highlighter-rouge">d</code> in <code class="language-plaintext highlighter-rouge">?</code> place. If both <code class="language-plaintext highlighter-rouge">i == 0</code> and <code class="language-plaintext highlighter-rouge">d == 0</code>, then we can not put <code class="language-plaintext highlighter-rouge">?</code> to <code class="language-plaintext highlighter-rouge">0</code>: we will have number starting with zero in this case. Also <code class="language-plaintext highlighter-rouge">d</code> should be <code class="language-plaintext highlighter-rouge">&lt;= t-1</code>, so if it is not the case we have <code class="language-plaintext highlighter-rouge">0</code> options as well. Finally, we have <code class="language-plaintext highlighter-rouge">10**(k-i-1)</code> options, becauswe we can put any numbers to <code class="language-plaintext highlighter-rouge">*</code> symbol.</li>
      <li><code class="language-plaintext highlighter-rouge">part3</code> is how many times we have digit <code class="language-plaintext highlighter-rouge">d</code> in the resp part of the number. First of all, as I mentioned, we already updated <code class="language-plaintext highlighter-rouge">q</code>, and we did it in advance, so we subtract <code class="language-plaintext highlighter-rouge">int(t==d)</code> here. (the reason we updated it in advance to deal with continue case in 3.3). Total number of digits we have here is <code class="language-plaintext highlighter-rouge">10**(k-i-1)</code>, because we can choose any digits for <code class="language-plaintext highlighter-rouge">*</code>, multiplied by <code class="language-plaintext highlighter-rouge">t</code>, because we have <code class="language-plaintext highlighter-rouge">t</code> options to choose <code class="language-plaintext highlighter-rouge">?</code> and multiplied by updated <code class="language-plaintext highlighter-rouge">q</code>: number of times we have digit <code class="language-plaintext highlighter-rouge">d</code> in our prefix. Note, that we will handle the case <code class="language-plaintext highlighter-rouge">?*****</code> for say number <code class="language-plaintext highlighter-rouge">231251</code> here correctly, even though we have <code class="language-plaintext highlighter-rouge">t-1</code> options for <code class="language-plaintext highlighter-rouge">?</code>, but here updated <code class="language-plaintext highlighter-rouge">q</code> will be equal to <code class="language-plaintext highlighter-rouge">0</code>.</li>
      <li>Update our <code class="language-plaintext highlighter-rouge">ans</code>, adding all <code class="language-plaintext highlighter-rouge">3</code> parts here.</li>
    </ol>
  </li>
  <li>Finally, we need to deal with numbers with <code class="language-plaintext highlighter-rouge">1, 2, ..., k-1</code> digits as well, for this we can calculate directly number of occurences with direct combinatorial formula.</li>
</ol>

<h4 id="complexity">Complexity</h4>
<p>It is <code class="language-plaintext highlighter-rouge">O(k)</code>, where <code class="language-plaintext highlighter-rouge">k</code> is the length of the biggest among <code class="language-plaintext highlighter-rouge">low</code> and <code class="language-plaintext highlighter-rouge">high</code>. Note also, that here we use exponents of <code class="language-plaintext highlighter-rouge">10</code>, which is in fact not truly <code class="language-plaintext highlighter-rouge">O(1)</code>, but for small values like we have we can assume that it is <code class="language-plaintext highlighter-rouge">O(1)</code>. If we imagine, that the problem need to be solved for much bigger numbers and get answer some module <code class="language-plaintext highlighter-rouge">M</code>, then this algorithm can be easily adapted to have <code class="language-plaintext highlighter-rouge">O(k)</code> complexity.</p>

<h4 id="code">Code</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">digitsCount</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">helper</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">limit</span><span class="p">):</span>
            <span class="n">l_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">limit</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">ans</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">q</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">l_str</span><span class="p">),</span> <span class="mi">0</span>
         
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
                <span class="n">t</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">l_str</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">q</span> <span class="o">+=</span> <span class="p">(</span><span class="n">t</span> <span class="o">==</span> <span class="n">d</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">t</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span> <span class="k">continue</span>
                <span class="n">part1</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">t</span><span class="o">-</span><span class="p">(</span><span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="p">))</span>
                <span class="n">part2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">t</span><span class="o">-</span><span class="mi">1</span> <span class="o">&gt;=</span> <span class="n">d</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
                <span class="n">part3</span> <span class="o">=</span> <span class="p">(</span><span class="n">q</span><span class="o">-</span><span class="p">(</span><span class="n">t</span><span class="o">==</span><span class="n">d</span><span class="p">))</span> <span class="o">*</span> <span class="n">t</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="n">k</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">ans</span> <span class="o">+=</span> <span class="n">part1</span> <span class="o">+</span> <span class="n">part2</span> <span class="o">+</span> <span class="n">part3</span>
        
            <span class="k">return</span> <span class="n">ans</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="n">full</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">full</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">9</span><span class="o">*</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">//</span><span class="mi">10</span> <span class="k">if</span> <span class="n">d</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">9</span><span class="o">*</span><span class="n">n</span><span class="o">-</span><span class="mi">9</span><span class="p">)</span><span class="o">//</span><span class="mi">10</span>
        
        <span class="k">return</span> <span class="n">helper</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">high</span><span class="p">)</span> <span class="o">-</span> <span class="n">helper</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">low</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

  </div><a class="u-url" href="/leetcode/1067.html" hidden></a>
</article>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Dmitry Babichev</li>
          <li><a class="u-email" href="mailto:dimitry008@gmail.com">dimitry008@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Here you can find solution to some algorithmic problems, at the moment it is mainly leetcode problems.
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>