<!DOCTYPE html>
<html lang="en"><head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Leetcode 0191. Number of 1 Bits | Dmitry Babichev’s webpage</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Leetcode 0191. Number of 1 Bits" />
<meta name="author" content="Dmitry Babichev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="https://leetcode.com/problems/number-of-1-bits" />
<meta property="og:description" content="https://leetcode.com/problems/number-of-1-bits" />
<meta property="og:site_name" content="Dmitry Babichev’s webpage" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-08-14T19:09:20+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Leetcode 0191. Number of 1 Bits" />
<script type="application/ld+json">
{"url":"/leetcode/0191.html","@type":"BlogPosting","headline":"Leetcode 0191. Number of 1 Bits","dateModified":"2021-08-14T19:09:20+02:00","datePublished":"2021-08-14T19:09:20+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"/leetcode/0191.html"},"author":{"@type":"Person","name":"Dmitry Babichev"},"description":"https://leetcode.com/problems/number-of-1-bits","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Dmitry Babichev's webpage" />
    






  
  
</head>

    
    <!-- for mathjax support -->
    
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Dmitry Babichev&#39;s webpage</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/leetcode%20problems/">Leetcode problems</a><a class="page-link" href="/coding%20ideas/">Patterns</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <span>[
  
    
    <a href="/tag/bit manipulation"><code class="highligher-rouge"><nobr>bit manipulation</nobr></code>&nbsp;</a>
  
]</span>

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Leetcode 0191. Number of 1 Bits</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-08-14T19:09:20+02:00" itemprop="datePublished">
        Aug 14, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><a href="https://leetcode.com/problems/number-of-1-bits"> <font color="blue">https://leetcode.com/problems/number-of-1-bits</font></a></p>

<p>There are a lot of different ways to solve this problem, starting from transforming number to string and count number of ones. However there is a classical bit manipulation trick you should think about when you have bits problem.</p>

<p>If we have number <code class="language-plaintext highlighter-rouge">n</code>, then <code class="language-plaintext highlighter-rouge">n&amp;(n-1)</code> <strong>will remove the rightmost</strong> in binary representation of <code class="language-plaintext highlighter-rouge">n</code>. For example if <code class="language-plaintext highlighter-rouge">n = 10110100</code>, then <code class="language-plaintext highlighter-rouge">n &amp; (n-1) = 10110100 &amp; 10110011 = 10110000</code>, where <code class="language-plaintext highlighter-rouge">&amp;</code> means bitwize operation and. Very convinient, is it not? What we need to do now, just repeat this operation until we have <code class="language-plaintext highlighter-rouge">n = 0</code> and count number of steps.</p>

<p><strong>Complexity</strong> It is <code class="language-plaintext highlighter-rouge">O(1)</code> for sure, because we need to make no more than <code class="language-plaintext highlighter-rouge">32</code> operations here, but it is quite vague: all methods will be <code class="language-plaintext highlighter-rouge">O(1)</code>, why this one is better than others? In fact it has complexity <code class="language-plaintext highlighter-rouge">O(m)</code>, where <code class="language-plaintext highlighter-rouge">m</code> is number of <code class="language-plaintext highlighter-rouge">1</code>-bits in our number. In average it will be <code class="language-plaintext highlighter-rouge">16</code> bits, so it is more like <code class="language-plaintext highlighter-rouge">16</code> operations, not <code class="language-plaintext highlighter-rouge">32</code> here, which gives us 2-times gain. Space complexity is <code class="language-plaintext highlighter-rouge">O(1)</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">hammingWeight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">n</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">ans</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">ans</span>
</code></pre></div></div>

<h2 id="just-5-operations">just 5 operations</h2>
<p>You can stop on previous solution and interviewer will be OK with that. But if you show him the following solution, he will be really happy. Let us understand what is going on in the following code.</p>

<ol>
  <li>First of all <code class="language-plaintext highlighter-rouge">0x55555555 = 01010101010101010101010101010101</code> in binary representation, so first step will deal with even and odd bits. What happens after first line of code computed: it will count number of non-zero bits in each pair. For simplicity imagine just first <code class="language-plaintext highlighter-rouge">8</code> bits with constant <code class="language-plaintext highlighter-rouge">0x55 = 01010101</code> and choose <code class="language-plaintext highlighter-rouge">n = 11000110</code>, then we have is <code class="language-plaintext highlighter-rouge">10 00 01 01</code>. Why? We have <code class="language-plaintext highlighter-rouge">2</code>, that is <code class="language-plaintext highlighter-rouge">10</code> ones in first pair, than we have <code class="language-plaintext highlighter-rouge">0</code> ones, than we have <code class="language-plaintext highlighter-rouge">1</code> one and finally we also have <code class="language-plaintext highlighter-rouge">1</code>.</li>
  <li>Now, to the second step, we have <code class="language-plaintext highlighter-rouge">0x33333333 = 110011001100110011001100110011</code>. Again let us look at only first <code class="language-plaintext highlighter-rouge">8</code> bit, that is to <code class="language-plaintext highlighter-rouge">11001100</code>. What will happend after this step, number of non-zero bits in groups of <code class="language-plaintext highlighter-rouge">4</code> will be computed. We stopped on number <code class="language-plaintext highlighter-rouge">10 00 01 01</code>, now we have <code class="language-plaintext highlighter-rouge">0010 0010</code>, because there is <code class="language-plaintext highlighter-rouge">2 + 0</code> ones in first group and <code class="language-plaintext highlighter-rouge">1+1</code> ones in second group.</li>
  <li>Next step is <code class="language-plaintext highlighter-rouge">0x0f0f0f0f = 1111000011110000111100001111</code> and we working with groups of <code class="language-plaintext highlighter-rouge">8</code>, so for our example we will have <code class="language-plaintext highlighter-rouge">00000100</code>, because we have <code class="language-plaintext highlighter-rouge">2</code> ones in each group.</li>
</ol>

<p><strong>Complexity</strong>: we have only <code class="language-plaintext highlighter-rouge">5</code> iterations for <code class="language-plaintext highlighter-rouge">int32</code> number, it will be <code class="language-plaintext highlighter-rouge">6</code> for <code class="language-plaintext highlighter-rouge">int64</code>, <code class="language-plaintext highlighter-rouge">7</code> for <code class="language-plaintext highlighter-rouge">int128</code> and so on. For <code class="language-plaintext highlighter-rouge">int32</code> there will be not increase of speed, because even though it is <code class="language-plaintext highlighter-rouge">5</code> operations, each of them consists of several small steps, but for <code class="language-plaintext highlighter-rouge">int64</code> you can fill the difference. Space complexity is <code class="language-plaintext highlighter-rouge">O(1)</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">hammingWeight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mh">0x55555555</span><span class="p">))</span> <span class="o">+</span> <span class="p">((</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mh">0x55555555</span><span class="p">))</span>
        <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mh">0x33333333</span><span class="p">))</span> <span class="o">+</span> <span class="p">((</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mh">0x33333333</span><span class="p">))</span>
        <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mh">0x0f0f0f0f</span><span class="p">))</span> <span class="o">+</span> <span class="p">((</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mh">0x0f0f0f0f</span><span class="p">))</span>
        <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mh">0x00ff00ff</span><span class="p">))</span> <span class="o">+</span> <span class="p">((</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mh">0x00ff00ff</span><span class="p">))</span>
        <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mh">0x0000ffff</span><span class="p">))</span> <span class="o">+</span> <span class="p">((</span><span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mh">0x0000ffff</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">n</span>
</code></pre></div></div>

<p>If you like the solution, you can <strong>upvote</strong> it on leetcode discussion section:<a href="https://leetcode.com/problems/number-of-1-bits/discuss/1044775/python-n-and-(n-1)-trick-explained"> <font color="blue">Problem 0191</font></a></p>

  </div><a class="u-url" href="/leetcode/0191.html" hidden></a>
</article>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Dmitry Babichev</li>
          <li><a class="u-email" href="mailto:dimitry008@gmail.com">dimitry008@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Here you can find solution to some algorithmic problems, at the moment it is mainly leetcode problems.
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>