<!DOCTYPE html>
<html lang="en"><head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Leetcode 0134. Gas Station | Dmitry Babichev’s webpage</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Leetcode 0134. Gas Station" />
<meta name="author" content="Dmitry Babichev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="https://leetcode.com/problems/gas-station" />
<meta property="og:description" content="https://leetcode.com/problems/gas-station" />
<meta property="og:site_name" content="Dmitry Babichev’s webpage" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-08-14T19:09:20+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Leetcode 0134. Gas Station" />
<script type="application/ld+json">
{"url":"/leetcode/0134.html","@type":"BlogPosting","headline":"Leetcode 0134. Gas Station","dateModified":"2021-08-14T19:09:20+02:00","datePublished":"2021-08-14T19:09:20+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"/leetcode/0134.html"},"author":{"@type":"Person","name":"Dmitry Babichev"},"description":"https://leetcode.com/problems/gas-station","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Dmitry Babichev's webpage" />
    






  
  
</head>

    
    <!-- for mathjax support -->
    
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Dmitry Babichev&#39;s webpage</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/leetcode%20problems/">Leetcode problems</a><a class="page-link" href="/coding%20ideas/">Patterns</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <span>[
  
    
    <a href="/tag/greedy"><code class="highligher-rouge"><nobr>greedy</nobr></code>&nbsp;</a>
  
]</span>

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Leetcode 0134. Gas Station</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-08-14T19:09:20+02:00" itemprop="datePublished">
        Aug 14, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><a href="https://leetcode.com/problems/gas-station"> <font color="blue">https://leetcode.com/problems/gas-station</font></a></p>

<p>Let us first evaluate differences between our <code class="language-plaintext highlighter-rouge">gas</code> and <code class="language-plaintext highlighter-rouge">cost</code>, because this is what we need in the end. Now, let us start from first place and  check if we can fulfill problem conditions: it means that all <strong>cumulative</strong> sums should be not negative. If we get negative cumulative sum, it means, that we can not succeed using current starting index, so we need to take next starting index. In fact we can do better: imagine, we have <code class="language-plaintext highlighter-rouge">i</code> as starging index and at some moment we have cumulative sum which is negative:</p>

<p><code class="language-plaintext highlighter-rouge">d_i + ... _ d_j &lt; 0</code>.</p>

<p>Note also, that it is the first time we have this sum negative. But it means, that if we consider any <code class="language-plaintext highlighter-rouge">k</code>, such that <code class="language-plaintext highlighter-rouge">i+1 &lt;=k &lt; j</code>, then sum <code class="language-plaintext highlighter-rouge">d_k + ... + d_j</code> also will be negatie, because sum <code class="language-plaintext highlighter-rouge">d_i + ... d_{k-1}</code> will be positive. It means, that the next candidate for starting index should be <code class="language-plaintext highlighter-rouge">j+1</code>.</p>

<p>Imagine example <code class="language-plaintext highlighter-rouge">-2 -2 -2 3 3</code>. Note, that our gas stations are on circle, so let us use duplication trick and traverse <code class="language-plaintext highlighter-rouge">-2 -2 -2 3 3 -2 -2 -2 3 3</code>. If we apply our logic, we will find  <code class="language-plaintext highlighter-rouge">-2 -2 -2</code> <strong>3 3 -2 -2 -2 3 3</strong>: it means if we have solution, starting index will be before first <code class="language-plaintext highlighter-rouge">n</code>.</p>

<p>If we have <code class="language-plaintext highlighter-rouge">-2 -2 -2 3 2</code>, then we have <code class="language-plaintext highlighter-rouge">-2 -2 -2 3 2 -2 -2 -2</code> <strong>3 2</strong>, so starting index is not before first <code class="language-plaintext highlighter-rouge">n</code>.</p>

<p><strong>Complexity</strong>: Time complexity is <code class="language-plaintext highlighter-rouge">O(n)</code>, because we have two passes over our data and space complexity is also <code class="language-plaintext highlighter-rouge">O(n)</code>, because I evaluate <code class="language-plaintext highlighter-rouge">diffs</code> (it can be easily reduced to <code class="language-plaintext highlighter-rouge">O(1)</code>).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">canCompleteCircuit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gas</span><span class="p">,</span> <span class="n">cost</span><span class="p">):</span>
        <span class="n">diffs</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">b</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">gas</span><span class="p">,</span> <span class="n">cost</span><span class="p">)]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span>
        <span class="n">cumsum</span><span class="p">,</span> <span class="n">out</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="p">):</span>
            <span class="n">cumsum</span> <span class="o">+=</span> <span class="n">diffs</span><span class="p">[</span><span class="n">i</span><span class="o">%</span><span class="n">n</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">cumsum</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">cumsum</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
                
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">out</span> <span class="o">&gt;</span> <span class="n">n</span> <span class="k">else</span> <span class="n">out</span>
</code></pre></div></div>

<p>If you like the solution, you can <strong>upvote</strong> it on leetcode discussion section:<a href="https://leetcode.com/problems/gas-station/discuss/860396/python-o(n)-greedy-solution-explained"> <font color="blue">Problem 0134</font></a></p>

  </div><a class="u-url" href="/leetcode/0134.html" hidden></a>
</article>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Dmitry Babichev</li>
          <li><a class="u-email" href="mailto:dimitry008@gmail.com">dimitry008@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Here you can find solution to some algorithmic problems, at the moment it is mainly leetcode problems.
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>