<!DOCTYPE html>
<html lang="en"><head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Leetcode 0109. Convert Sorted List to Binary Search Tree | Dmitry Babichev’s webpage</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Leetcode 0109. Convert Sorted List to Binary Search Tree" />
<meta name="author" content="Dmitry Babichev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Problem statement" />
<meta property="og:description" content="Problem statement" />
<meta property="og:site_name" content="Dmitry Babichev’s webpage" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-08-14T19:09:20+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Leetcode 0109. Convert Sorted List to Binary Search Tree" />
<script type="application/ld+json">
{"url":"/leetcode/0109.html","@type":"BlogPosting","headline":"Leetcode 0109. Convert Sorted List to Binary Search Tree","dateModified":"2021-08-14T19:09:20+02:00","datePublished":"2021-08-14T19:09:20+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"/leetcode/0109.html"},"author":{"@type":"Person","name":"Dmitry Babichev"},"description":"Problem statement","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Dmitry Babichev's webpage" />
    






  
  
</head>

    
    <!-- for mathjax support -->
    
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Dmitry Babichev&#39;s webpage</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/leetcode%20problems/">Leetcode problems</a><a class="page-link" href="/coding%20ideas/">Patterns</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <span>[
  
    
    <a href="/tag/linked list"><code class="highligher-rouge"><nobr>linked list</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/recursion"><code class="highligher-rouge"><nobr>recursion</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/bst"><code class="highligher-rouge"><nobr>bst</nobr></code>&nbsp;</a>
  
]</span>

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Leetcode 0109. Convert Sorted List to Binary Search Tree</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-08-14T19:09:20+02:00" itemprop="datePublished">
        Aug 14, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h4 id="problem-statement">Problem statement</h4>

<p><a href="https://leetcode.com/problems/convert-sorted-list-to-binary-search-tree/"> <font color="blue">https://leetcode.com/problems/convert-sorted-list-to-binary-search-tree/</font></a></p>

<h4 id="solution">Solution</h4>
<p>There are solutions with different time/space complexities.</p>
<ol>
  <li>We can just transform everything to array and then create bst, in <code class="language-plaintext highlighter-rouge">O(n)</code> time and <code class="language-plaintext highlighter-rouge">O(n)</code> space.</li>
  <li>Or we can not create array, but then each time we need to find middle, and time will be <code class="language-plaintext highlighter-rouge">O(n log n)</code>.</li>
</ol>

<p>Imagine now, that we can reuse nodes of our linked list to create nodes of bst. This is not the case in this problem, but if it was the case than we can have space complexity smaller than <code class="language-plaintext highlighter-rouge">O(n)</code>. The main complexity in idea <code class="language-plaintext highlighter-rouge">2</code> is that we always need to find the middle element in list, which is quite heavy: we need to traverse all (or half) of the list. Let us use function <code class="language-plaintext highlighter-rouge">helper(beg, end)</code>, with:</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">(beg, end)</code> are indexes in original linked list we want to traverse and create BST from these elements.</li>
  <li>Output will be the root of BST</li>
  <li>We also keep one more piece of information: <code class="language-plaintext highlighter-rouge">self.head</code>: global variable, which will help us to have quick access to desired elements: on step <code class="language-plaintext highlighter-rouge">i</code> in inorder traversal it will point to <code class="language-plaintext highlighter-rouge">i</code>-th element in linked list. More precisely when we run <code class="language-plaintext highlighter-rouge">helper(beg, end)</code>, after execution of this code, <code class="language-plaintext highlighter-rouge">self.head</code> will point to the element with index <code class="language-plaintext highlighter-rouge">end + 1</code>. This is <strong>invariant</strong> of our <code class="language-plaintext highlighter-rouge">helper</code> functioun.</li>
</ol>

<p>Now, function will look like this:</p>
<ol>
  <li>Check if <code class="language-plaintext highlighter-rouge">beg &gt; end</code> and if it is the case, we out of nodes, we return <code class="language-plaintext highlighter-rouge">None</code>.</li>
  <li>Find <code class="language-plaintext highlighter-rouge">mid</code> element as <code class="language-plaintext highlighter-rouge">(beg + end)//2</code>.</li>
  <li>Run our <code class="language-plaintext highlighter-rouge">helper</code> function recursively: <code class="language-plaintext highlighter-rouge">helper(beg, mid - 1)</code>. Note where our <code class="language-plaintext highlighter-rouge">self.head</code> is now. It is changed after we run this funtion and now points at element with index <code class="language-plaintext highlighter-rouge">mid</code>.</li>
  <li>Create <code class="language-plaintext highlighter-rouge">root</code>: we use <code class="language-plaintext highlighter-rouge">self.head</code> for this.</li>
  <li>Move <code class="language-plaintext highlighter-rouge">self.head</code> one step to the right.</li>
  <li>Now, it is time to attach left subtree to our root.</li>
  <li>Finally, attach right subtree: <code class="language-plaintext highlighter-rouge">helper(mid + 1, end)</code> to our root. Note howe <code class="language-plaintext highlighter-rouge">self.head</code> changed after this: it will point at element with index <code class="language-plaintext highlighter-rouge">end + 1</code>. So, we proved, that our <strong>invariant</strong> holds.</li>
  <li>Return <code class="language-plaintext highlighter-rouge">root</code>.</li>
</ol>

<h4 id="complexity">Complexity</h4>
<p>Time complexity is <code class="language-plaintext highlighter-rouge">O(n)</code>: we traverse every node only once. Space complexity is also <code class="language-plaintext highlighter-rouge">O(n)</code>, because we need to create object with <code class="language-plaintext highlighter-rouge">n</code> elements in the end. However why this is better than creating array, is because if we allowed to modify elements of the linked list to make them directly elements of BST, then space complexity would have been <code class="language-plaintext highlighter-rouge">O(log n)</code>.</p>

<h4 id="code">Code</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">sortedListToBST</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">head</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">helper</span><span class="p">(</span><span class="n">beg</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">beg</span> <span class="o">&gt;</span> <span class="n">end</span><span class="p">:</span> <span class="k">return</span> <span class="bp">None</span>
            <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">beg</span> <span class="o">+</span> <span class="n">end</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">helper</span><span class="p">(</span><span class="n">beg</span><span class="p">,</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">root</span> <span class="o">=</span> <span class="n">TreeNode</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">head</span><span class="p">.</span><span class="n">val</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">head</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">head</span><span class="p">.</span><span class="nb">next</span>
            <span class="n">root</span><span class="p">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span>
            <span class="n">root</span><span class="p">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">helper</span><span class="p">(</span><span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">root</span>
        
        <span class="bp">self</span><span class="p">.</span><span class="n">head</span><span class="p">,</span> <span class="n">copy</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">head</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">copy</span><span class="p">:</span>
            <span class="n">copy</span> <span class="o">=</span> <span class="n">copy</span><span class="p">.</span><span class="nb">next</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
            
        <span class="k">return</span> <span class="n">helper</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

  </div><a class="u-url" href="/leetcode/0109.html" hidden></a>
</article>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Dmitry Babichev</li>
          <li><a class="u-email" href="mailto:dimitry008@gmail.com">dimitry008@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Here you can find solution to some algorithmic problems, at the moment it is mainly leetcode problems.
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>