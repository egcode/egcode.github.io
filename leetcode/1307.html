<!DOCTYPE html>
<html lang="en"><head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Leetcode 1307. Verbal Arithmetic Puzzle | Dmitry Babichev’s webpage</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Leetcode 1307. Verbal Arithmetic Puzzle" />
<meta name="author" content="Dmitry Babichev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Problem statement" />
<meta property="og:description" content="Problem statement" />
<meta property="og:site_name" content="Dmitry Babichev’s webpage" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-08-14T19:09:20+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Leetcode 1307. Verbal Arithmetic Puzzle" />
<script type="application/ld+json">
{"url":"/leetcode/1307.html","@type":"BlogPosting","headline":"Leetcode 1307. Verbal Arithmetic Puzzle","dateModified":"2021-08-14T19:09:20+02:00","datePublished":"2021-08-14T19:09:20+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"/leetcode/1307.html"},"author":{"@type":"Person","name":"Dmitry Babichev"},"description":"Problem statement","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Dmitry Babichev's webpage" />
    






  
  
</head>

    
    <!-- for mathjax support -->
    
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Dmitry Babichev&#39;s webpage</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/leetcode%20problems/">Leetcode problems</a><a class="page-link" href="/coding%20ideas/">Patterns</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <span>[
  
    
    <a href="/tag/dfs"><code class="highligher-rouge"><nobr>dfs</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/string"><code class="highligher-rouge"><nobr>string</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/math"><code class="highligher-rouge"><nobr>math</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/backtracking"><code class="highligher-rouge"><nobr>backtracking</nobr></code>&nbsp;</a>
  
]</span>

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Leetcode 1307. Verbal Arithmetic Puzzle</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-08-14T19:09:20+02:00" itemprop="datePublished">
        Aug 14, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h4 id="problem-statement">Problem statement</h4>

<p><a href="https://leetcode.com/problems/verbal-arithmetic-puzzle/"> <font color="blue">https://leetcode.com/problems/verbal-arithmetic-puzzle/</font></a></p>

<h4 id="solution">Solution</h4>
<p>Not very nice problem: we need to do dfs with some pruning. Here I use <code class="language-plaintext highlighter-rouge">dfs(words, free)</code>, where words are partially solved puzzle and free are digits which are still available. Each time we check for each word how many last letters we already allocated and check if we have conflict modulo <code class="language-plaintext highlighter-rouge">10**l_min</code>. If we have it or any word starts with zero, but not equal to zero, return. Then we check if <code class="language-plaintext highlighter-rouge">l_min == 10</code> it means that all letters already replaced with digits and if <code class="language-plaintext highlighter-rouge">M == 0</code>, it means that we have solution.</p>

<p>Imagine, that we have so far <code class="language-plaintext highlighter-rouge">[###12, ###34, ####6]</code>, where the last one is answer. Then what we need to choose is the letter before <code class="language-plaintext highlighter-rouge">6</code> and try to allocate any digit. (in fact here we can directly allocate 5, but it is more difficult to code)</p>

<h4 id="complexity">Complexity</h4>
<p>Time complexity potentially is <code class="language-plaintext highlighter-rouge">O(10!)</code>, but due to pruning it passed. In python it works quite slow and can be made <code class="language-plaintext highlighter-rouge">10</code> times faster, but I do not like this problem so I do not want to do it.</p>

<h4 id="code">Code</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">isSolvable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">last_d</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">s</span><span class="p">.</span><span class="n">isdigit</span><span class="p">():</span> <span class="k">return</span> <span class="mi">10</span>  <span class="c1">#means word is fully covered
</span>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">isdigit</span><span class="p">():</span> <span class="k">break</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span>
        
        <span class="k">def</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">free</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">Found</span><span class="p">:</span> <span class="k">return</span>
            <span class="n">lasts</span> <span class="o">=</span> <span class="p">[</span><span class="n">last_d</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">]</span>
            <span class="n">l_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">lasts</span><span class="p">)</span>
            <span class="n">ends</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">w</span><span class="p">[</span><span class="o">-</span><span class="n">l_min</span><span class="p">:])</span> <span class="k">if</span> <span class="n">l_min</span> <span class="k">else</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">]</span>
            <span class="n">M</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">ends</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="o">*</span><span class="n">ends</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            
            <span class="k">if</span> <span class="n">M</span> <span class="o">%</span> <span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="n">l_min</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span><span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">"0"</span> <span class="ow">and</span> <span class="n">w</span> <span class="o">!=</span> <span class="s">"0"</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">):</span>
                <span class="k">return</span>
            
            <span class="k">if</span> <span class="n">l_min</span> <span class="o">==</span> <span class="mi">10</span> <span class="ow">and</span> <span class="n">M</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">Found</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">return</span>
            
            <span class="n">l_ind</span> <span class="o">=</span> <span class="n">lasts</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="n">l_min</span><span class="p">)</span>
            <span class="n">symb</span> <span class="o">=</span> <span class="n">words</span><span class="p">[</span><span class="n">l_ind</span><span class="p">][</span><span class="o">-</span><span class="n">l_min</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
            
            <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">free</span><span class="p">:</span>
                <span class="n">words2</span><span class="p">,</span> <span class="n">free2</span> <span class="o">=</span> <span class="n">words</span><span class="p">[:],</span> <span class="n">free</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">words2</span><span class="p">):</span>
                    <span class="n">words2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="n">symb</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
                <span class="n">free2</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
                <span class="n">dfs</span><span class="p">(</span><span class="n">words2</span><span class="p">,</span> <span class="n">free2</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="p">.</span><span class="n">Found</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">dfs</span><span class="p">(</span><span class="n">words</span> <span class="o">+</span> <span class="p">[</span><span class="n">result</span><span class="p">],</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">Found</span>
</code></pre></div></div>

  </div><a class="u-url" href="/leetcode/1307.html" hidden></a>
</article>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Dmitry Babichev</li>
          <li><a class="u-email" href="mailto:dimitry008@gmail.com">dimitry008@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Here you can find solution to some algorithmic problems, at the moment it is mainly leetcode problems.
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>