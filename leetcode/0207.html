<!DOCTYPE html>
<html lang="en"><head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Leetcode 0207. Course Schedule | Dmitry Babichev’s webpage</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Leetcode 0207. Course Schedule" />
<meta name="author" content="Dmitry Babichev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="https://leetcode.com/problems/course-schedule" />
<meta property="og:description" content="https://leetcode.com/problems/course-schedule" />
<meta property="og:site_name" content="Dmitry Babichev’s webpage" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-08-14T19:09:20+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Leetcode 0207. Course Schedule" />
<script type="application/ld+json">
{"url":"/leetcode/0207.html","@type":"BlogPosting","headline":"Leetcode 0207. Course Schedule","dateModified":"2021-08-14T19:09:20+02:00","datePublished":"2021-08-14T19:09:20+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"/leetcode/0207.html"},"author":{"@type":"Person","name":"Dmitry Babichev"},"description":"https://leetcode.com/problems/course-schedule","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Dmitry Babichev's webpage" />
    






  
  
</head>

    
    <!-- for mathjax support -->
    
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Dmitry Babichev&#39;s webpage</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/leetcode%20problems/">Leetcode problems</a><a class="page-link" href="/coding%20ideas/">Patterns</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <span>[
  
    
    <a href="/tag/topological sort"><code class="highligher-rouge"><nobr>topological sort</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/graph"><code class="highligher-rouge"><nobr>graph</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/dfs"><code class="highligher-rouge"><nobr>dfs</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/bfs"><code class="highligher-rouge"><nobr>bfs</nobr></code>&nbsp;</a>
  
]</span>

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Leetcode 0207. Course Schedule</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-08-14T19:09:20+02:00" itemprop="datePublished">
        Aug 14, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><a href="https://leetcode.com/problems/course-schedule"> <font color="blue">https://leetcode.com/problems/course-schedule</font></a></p>

<p>This is the classical problem about <strong>topological sort</strong>: (for more details you can look https://en.wikipedia.org/wiki/Topological_sorting). The basic idea of topological for directed graphs is to check if there cycle in this graph. For example if you have in your  schedule dependencies like <code class="language-plaintext highlighter-rouge">0 -&gt; 5, 5-&gt; 3</code> and <code class="language-plaintext highlighter-rouge">3 -&gt; 0</code>, then we say, that <strong>cycle</strong> exists and in this case we need to return <code class="language-plaintext highlighter-rouge">False</code>.</p>

<p>There are different ways to do topological sort, I prefer to use dfs. The idea is to use classical <code class="language-plaintext highlighter-rouge">dfs</code> traversal, but color our nodes into <code class="language-plaintext highlighter-rouge">3</code> different colors, <code class="language-plaintext highlighter-rouge">0 (white)</code> for node which is not visited yet, <code class="language-plaintext highlighter-rouge">1 (gray)</code> for node which is in process of visiting (not all its neibours are processed), and <code class="language-plaintext highlighter-rouge">2 (black)</code> for node which is fully visited (all its neibours are already processed). The proof can be found for example in classical Cormen book.</p>

<p>So, basically we have two variables:  <code class="language-plaintext highlighter-rouge">self.Visited = [0] * numCourses</code> where we keep our colors and define <code class="language-plaintext highlighter-rouge">self.FoundCycle = 0</code>, we keep it for early stopping, if we found cycle we do not need to continue and we can iterrurupt earlier. Not, that graph is not necessarily connected, so we need to start our dfs from all nodes.</p>

<p><strong>Comlexity.</strong> We use classical dfs, so time comlexity is <code class="language-plaintext highlighter-rouge">O(E+V)</code>, where <code class="language-plaintext highlighter-rouge">E</code> is number of edges and <code class="language-plaintext highlighter-rouge">V</code> is number of vertices. Space complexity is also <code class="language-plaintext highlighter-rouge">O(E+V)</code> because we work with adjacency lists.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">canFinish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numCourses</span><span class="p">,</span> <span class="n">prerequisites</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">adj_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">prerequisites</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">adj_dict</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">add</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>

        <span class="bp">self</span><span class="p">.</span><span class="n">Visited</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">numCourses</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">FoundCycle</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numCourses</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">FoundCycle</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="k">break</span>   <span class="c1"># early stop if the loop is found
</span>            <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">Visited</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">DFS</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">FoundCycle</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">DFS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">FoundCycle</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>   <span class="k">return</span>     <span class="c1"># early stop if the loop is found    
</span>        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">Visited</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">FoundCycle</span> <span class="o">=</span> <span class="mi">1</span>               <span class="c1"># loop is found
</span>        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">Visited</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>           <span class="c1"># node is not visited yet, visit it
</span>            <span class="bp">self</span><span class="p">.</span><span class="n">Visited</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>             <span class="c1"># color current node as gray
</span>            <span class="k">for</span> <span class="n">neib</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">adj_dict</span><span class="p">[</span><span class="n">start</span><span class="p">]:</span>   <span class="c1"># visit all its neibours
</span>                <span class="bp">self</span><span class="p">.</span><span class="n">DFS</span><span class="p">(</span><span class="n">neib</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">Visited</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>             <span class="c1"># color current node as black
</span></code></pre></div></div>

<p>If you like the solution, you can <strong>upvote</strong> it on leetcode discussion section:<a href="https://leetcode.com/problems/course-schedule/discuss/658297/python-topological-sort-with-recurcive-dfs-explained"> <font color="blue">Problem 0207</font></a></p>

  </div><a class="u-url" href="/leetcode/0207.html" hidden></a>
</article>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Dmitry Babichev</li>
          <li><a class="u-email" href="mailto:dimitry008@gmail.com">dimitry008@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Here you can find solution to some algorithmic problems, at the moment it is mainly leetcode problems.
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>